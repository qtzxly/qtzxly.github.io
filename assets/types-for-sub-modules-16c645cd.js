import{u as a,c as r,w as t,_ as n,o as p,a as s,d as o}from"./app-b266d4ec.js";const c=s("div",{class:"prose m-auto slide-enter-content"},[s("p",null,[o("When you build multiple entries in a single package, you exports them with "),s("code",null,"exports"),o(" syntax. Like")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'  "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"exports"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'    "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"."),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"types"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/index.d.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"import"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/index.mjs"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"require"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/index.cjs"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"')]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    },")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'    "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"./foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"types"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"import"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/foo.mjs"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"require"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},' "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/foo.cjs"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"')]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),o(`
`),s("span",{class:"line"})])]),s("p",null,[o("Then tho you provide "),s("code",null,"types"),o(" field for the sub modules, most of the users still got the error:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"inherit","--s-dark":"inherit"}},"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"inherit","--s-dark":"inherit"}})])])]),s("p",null,[o("Well thatâ€™s because the "),s("code",null,"types"),o(" field in "),s("code",null,"exports"),o(" will only be resolved when you add "),s("code",null,'"moduleResolution": "NodeNext"'),o(" to the "),s("code",null,"tsconfig.json"),o(" file. Which might cause more issue since not all the packages are up to date.")]),s("p",null,[o("So when you trying to import "),s("code",null,"my-pkg/foo"),o(", TypeScript actually looking for the "),s("code",null,"foo.d.ts"),o(" file under your package root instead of your "),s("code",null,"dist"),o(" folder. One solution I been used for a long time is to create a redirection file that published to npm, like:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// foo.d.ts")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," default"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," *"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/foo.d.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),o(`
`),s("span",{class:"line"})])]),s("p",null,"Which solve the problem, but also making your root directory quite messy."),s("p",null,[o("Until "),s("a",{href:"https://github.com/tmkx",target:"_blank",rel:"noopener"},"@tmkx"),o(),s("a",{href:"https://github.com/antfu/unplugin-auto-import/pull/120",target:"_blank",rel:"noopener"},"shared me"),o(" this solution:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'  "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"typesVersions"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'    "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"*"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'      "'),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"*"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," [")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'        "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/index.d.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'        "'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./dist/*"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"')]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"      ]")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),o(`
`),s("span",{class:"line"})])]),s("p",null,[o("Good day! "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html#version-selection-with-typesversions",target:"_blank",rel:"noopener"},"Reference")])],-1),f={__name:"types-for-sub-modules",setup(d){const e={title:"Types for Submodules",date:"2021-03-01T16:00:00.000Z",lang:"en",duration:"5min",type:"note",image:"https://antfu.me/og/types-for-sub-modules.png",meta:[{property:"og:title",content:"Types for Submodules"},{name:"twitter:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]};return a({title:"Types for Submodules",meta:[{property:"og:title",content:"Types for Submodules"},{name:"twitter:title",content:"Types for Submodules"},{property:"og:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:image",content:"https://antfu.me/og/types-for-sub-modules.png"},{name:"twitter:card",content:"summary_large_image"}]}),(y,k)=>{const l=n;return p(),r(l,{frontmatter:e},{default:t(()=>[c]),_:1})}}};export{f as default};
