import{u as l,c as o,w as n,_ as t,o as c,a as s,d as a}from"./app-b266d4ec.js";const d=s("div",{class:"prose m-auto slide-enter-content"},[s("p",null,[s("div",{class:"table-of-contents"},[s("div",{class:"table-of-contents-anchor"},[s("div",{class:"i-ri-menu-2-fill"})]),s("ul",null,[s("li",null,[s("a",{href:"#destructuring-arrays-tuples"},"Destructuring Arrays / Tuples ")]),s("li",null,[s("a",{href:"#destructuring-objects"},"Destructuring Objects ")]),s("li",null,[s("a",{href:"#support-both"},"Support Both "),s("ul",null,[s("li",null,[s("a",{href:"#make-an-object-behaves-like-an-array"},"Make an object behaves like an array ")]),s("li",null,[s("a",{href:"#make-an-array-behaves-like-an-object"},"Make an array behaves like an object ")]),s("li",null,[s("a",{href:"#iterable-object"},"Iterable Object ")])])]),s("li",null,[s("a",{href:"#generator"},"Generator ")]),s("li",null,[s("a",{href:"#typescript"},"TypeScript ")]),s("li",null,[s("a",{href:"#take-away"},"Take Away "),s("ul",null,[s("li",null,[s("ul",null,[s("li",null,[s("a",{href:"#usage"},"Usage ")])])])])])])])]),s("blockquote",null,[s("p",null,[s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment",target:"_blank",rel:"noopener"},"Destructuring"),a(" is a JavaScript language feature introduced in ES6 which I would assume you already familiar with it before moving on.")])]),s("p",null,'We see it quite useful in many scenarios, for example, value swapping, named arguments, objects shallow merging, array slicing, etc. Today I would like to share some of my immature thoughts on "destructuring" in some web frameworks.'),s("p",null,[a("I am a Vue enthusiast for sure and I wrote a lot of my apps using it. And I did write React a while for my previous company "),s("s",null,"reluctantly"),a(". As the Vue 3.0 came out recently, its exciting Composition API provides quite similar abilities for abstracting. Inspired by "),s("a",{href:"https://github.com/streamich/react-use",target:"_blank",rel:"noopener"},"react-use"),a(", I wrote a composable utility collection library early this year called "),s("a",{href:"https://github.com/antfu/vueuse",target:"_blank",rel:"noopener"},"VueUse"),a(".")]),s("p",null,"Similar to React hooks, Vue’s composable functions will take some arguments and returns some data and functions. JavaScript is just like other C-liked programming languages - only one return value is allowed. So a workaround for returning multiple values, we would commonly wrap them with an array or an object, and then destructure the returned arrays/objects. As you can already see, we are having two different philosophies here, using arrays or objects."),s("h2",{id:"destructuring-arrays-tuples",tabindex:"-1"},[a("Destructuring Arrays / Tuples "),s("a",{class:"header-anchor",href:"#destructuring-arrays-tuples","aria-hidden":"true"},"#")]),s("p",null,"In React hooks, it’s a common practice to use array destructuring. For example, built-in functions:"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," setCounter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[a("Libraries for React hooks would natural pick the similar philosophy, for example "),s("a",{href:"https://github.com/streamich/react-use",target:"_blank",rel:"noopener"},"react-use"),a(":")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"on"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," toggle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useToggle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"true"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," setValue"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," remove"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useLocalStorage"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"my-key"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"The benefits of array destructuring is quite straightforward - you get the freedom to set the variable names with the clean looking."),s("h2",{id:"destructuring-objects",tabindex:"-1"},[a("Destructuring Objects "),s("a",{class:"header-anchor",href:"#destructuring-objects","aria-hidden":"true"},"#")]),s("p",null,[a("Instead of returning the getter and setter in React’s "),s("code",null,"useState"),a(", in Vue 3, a "),s("code",null,"ref"),a(" is created combining the getter and setter inside the single object. Naming is simpler and destructuring is no longer needed.")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// React")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," setCounter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"        // get")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"setCounter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," +"),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"     // set")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// Vue 3")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"  // get")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"++"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"             // set")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[a("Since we don’t need to rename the same thing twice for getter and setter like React does, in "),s("a",{href:"https://github.com/antfu/vueuse",target:"_blank",rel:"noopener"},"VueUse"),a(", I implemented most of the functions with object returns, like:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," x"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," y"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"Using objects gives users more flexibility like"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// no destructing, clear namespace")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"mouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"mouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"x")]),a(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// use only part of the value")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," y"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),a(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// rename things")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," x"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," mouseX"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," y"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," mouseY"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"While it’s been good for different preferences and named attributes can be self-explaining, the renaming could be somehow verbose than array destructuring."),s("h2",{id:"support-both",tabindex:"-1"},[a("Support Both "),s("a",{class:"header-anchor",href:"#support-both","aria-hidden":"true"},"#")]),s("p",null,"What if we could support them both? Taking the advantages on each side and let users decide which style to be used to better fit their needs."),s("p",null,"I did saw one library supports such usage once but I can’t recall which. However, this idea buried in mind since then. And now I am going to experiment it out."),s("p",null,[a("My assumption is that it returns an object with both behaviors of "),s("code",null,"array"),a(" and "),s("code",null,"object"),a(". The path is clear, either to make an "),s("code",null,"object"),a(" like "),s("code",null,"array"),a(" or an "),s("code",null,"array"),a(" like "),s("code",null,"object"),a(".")]),s("h3",{id:"make-an-object-behaves-like-an-array",tabindex:"-1"},[a("Make an object behaves like an array "),s("a",{class:"header-anchor",href:"#make-an-object-behaves-like-an-array","aria-hidden":"true"},"#")]),s("p",null,"The first possible solution comes up to my mind is to make an object behaves like an array, as you probably know, arrays are actually objects with number indexes and some prototypes. So the code would be like:"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"  0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"  1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // ERROR!")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"But when we destructure it as an array, it will throw out this error:"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Uncaught"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," TypeError"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," is"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," not"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," iterable")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"Before we working on how to make an object iterable, let’s try the other direction first."),s("h3",{id:"make-an-array-behaves-like-an-object",tabindex:"-1"},[a("Make an array behaves like an object "),s("a",{class:"header-anchor",href:"#make-an-array-behaves-like-an-object","aria-hidden":"true"},"#")]),s("p",null,"Since arrays are objects, we should be able to extend it, like"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ["),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"This works and we can call it a day now! However, if you are a perfectionist, you will find there is an edge case not be well covered. If we use the rest pattern to retrieve the remaining parts, the number indexes will unexpectedly be included in the rest object."),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ..."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"rest"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[s("code",null,"rest"),a(" will be:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"  0"),s("span",{style:{color:"#393A34","--s-dark":"#DBD7CAEE"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"  1"),s("span",{style:{color:"#393A34","--s-dark":"#DBD7CAEE"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("h3",{id:"iterable-object",tabindex:"-1"},[a("Iterable Object "),s("a",{class:"header-anchor",href:"#iterable-object","aria-hidden":"true"},"#")]),s("p",null,[a("Let’s go back to our first approach to see if we can make an object iterable. And luckily, "),s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator",target:"_blank",rel:"noopener"},[s("code",null,"Symbol.iterator")]),a(" is designed for the task! The document shows exactly the usage, doing some modification and we get this:")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  *"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"iterator"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    yield"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    yield"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  },")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[a("It works well but the "),s("code",null,"Symbol.iterator"),a(" will still be included in the rest pattern.")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ..."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"rest"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// rest")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"iterator"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#393A34","--s-dark":"#DBD7CAEE"}},": "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"ƒ"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"*")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("p",null,[a("Since we are working on objects, it shouldn’t be hard to make some properties not enumerable. By using "),s("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty",target:"_blank",rel:"noopener"},[s("code",null,"Object.defineProperty")]),a(" with "),s("code",null,"enumerable: false"),a(":")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Object"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"defineProperty"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"iterator"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  enumerable"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"false"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"*"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    yield"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    yield"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  },")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),a(`
`),s("span",{class:"line"})])]),s("p",null,"Now we are successfully hiding the extra properties!"),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ..."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"rest"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// rest")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},":"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("h2",{id:"generator",tabindex:"-1"},[a("Generator "),s("a",{class:"header-anchor",href:"#generator","aria-hidden":"true"},"#")]),s("p",null,[a("If you don’t like the usage of generators, we can implement it with pure functions, following "),s("a",{href:"https://itnext.io/introduction-to-javascript-iterator-eac78849e0f7#:~:text=An%20iterator%20is%20an%20object,new%20iterator%20for%20each%20call",target:"_blank",rel:"noopener"},"this article"),a(".")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Object"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"defineProperty"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"clone"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"iterator"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  enumerable"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"false"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"    let "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 0")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"    let "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"      next"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": () => ({")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"        value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"++"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"],")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"        done"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," > "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"length"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"      })")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),a(`
`),s("span",{class:"line"})])]),s("h2",{id:"typescript",tabindex:"-1"},[a("TypeScript "),s("a",{class:"header-anchor",href:"#typescript","aria-hidden":"true"},"#")]),s("p",null,[a("To me, it’s meaningless if we could not get proper TypeScript support on this. Surprisingly, TypeScript support such usage almost out-of-box. Just simply use the "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/unions-and-intersections.html#intersection-types",target:"_blank",rel:"noopener"},[s("code",null,"&"),a(" operator")]),a(" to make insertion of the object and array type. Destructuring will properly infer the types in both usages.")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"type"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," Magic"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," &"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ["),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]")]),a(`
`),s("span",{class:"line"})])]),s("h2",{id:"take-away",tabindex:"-1"},[a("Take Away "),s("a",{class:"header-anchor",href:"#take-away","aria-hidden":"true"},"#")]),s("p",null,"Finally, I made it a general function to merge arrays and objects intro the isomorphic destructurable. You can just copy the TypeScript snippet below to use it. Thanks for reading through!"),s("blockquote",null,[s("p",null,[a("Please note this does NOT support IE11. More details: "),s("a",{href:"https://caniuse.com/?search=Symbol.iterator",target:"_blank",rel:"noopener"},"Supported browers")])]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," createIsomorphicDestructurable"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"  T"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," extends"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," Record"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," unknown"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">,")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"  A"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," extends"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," readonly"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," any"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"[]")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},">("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"obj"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"A"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"):"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," &"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," A"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"clone"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," { ..."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"obj"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  Object"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"defineProperty"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"clone"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"iterator"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"    enumerable"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"false"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"      let "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 0")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"      return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"        next"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": () => ({")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"          value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"++"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"],")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"          done"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"index"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," > "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arr"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"length"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"        })")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"      }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  })")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," clone"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," as"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," &"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," A")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),a(`
`),s("span",{class:"line"})])]),s("h4",{id:"usage",tabindex:"-1"},[a("Usage "),s("a",{class:"header-anchor",href:"#usage","aria-hidden":"true"},"#")]),s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," { "),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1024")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"obj"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," createIsomorphicDestructurable"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  { "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," as"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," const"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  ["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," as"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," const")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),a(`
`),s("span",{class:"line"}),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," obj")]),a(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ]"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," obj")]),a(`
`),s("span",{class:"line"})])])],-1),u={__name:"destructuring-with-object-or-array",setup(p){const r={title:"Destructuring... with object or array?",description:"Prefer object destructure or array? Can we support both?",lang:"en",date:"2020-10-21T16:00:00.000Z",duration:"8min",image:"/images/destructuring.png",meta:[{property:"og:title",content:"Destructuring... with object or array?"},{name:"twitter:title",content:"Destructuring... with object or array?"},{name:"description",content:"Prefer object destructure or array? Can we support both?"},{property:"og:description",content:"Prefer object destructure or array? Can we support both?"},{name:"twitter:description",content:"Prefer object destructure or array? Can we support both?"},{property:"og:image",content:"/images/destructuring.png"},{name:"twitter:image",content:"/images/destructuring.png"},{name:"twitter:card",content:"summary_large_image"}]};return l({title:"Destructuring... with object or array?",meta:[{property:"og:title",content:"Destructuring... with object or array?"},{name:"twitter:title",content:"Destructuring... with object or array?"},{name:"description",content:"Prefer object destructure or array? Can we support both?"},{property:"og:description",content:"Prefer object destructure or array? Can we support both?"},{name:"twitter:description",content:"Prefer object destructure or array? Can we support both?"},{property:"og:image",content:"/images/destructuring.png"},{name:"twitter:image",content:"/images/destructuring.png"},{name:"twitter:card",content:"summary_large_image"}]}),(i,y)=>{const e=t;return c(),o(e,{frontmatter:r},{default:n(()=>[d]),_:1})}}};export{u as default};
