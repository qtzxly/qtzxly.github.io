import{l as k,o as t,g as D,r as w,c as y,w as o,d as e,e as _,a as s,t as b,h as A,i as F,D as m,u as E,_ as x,b as a}from"./app-b266d4ec.js";import{_ as I}from"./logo-github-a18ceef2.js";import{_ as T}from"./Slidev-10c91b00.js";const V={},S={class:"bg-gray:10 px-2 py-0.5 mx1 rounded font-mono inline-block text-0.6em transform translate-y-[-1em] translate-x-[-0.3em]"};function R(r,n){return t(),D("span",S,[w(r.$slots,"default")])}const u=k(V,[["render",R]]),j={};function M(r,n){const l=u;return t(),y(l,{class:"text-orange-400"},{default:o(()=>[e(" Tips ")]),_:1})}const U=k(j,[["render",M]]),P={};function W(r,n){const l=u;return t(),y(l,{class:"text-pink-500"},{default:o(()=>[e(" Pattern ")]),_:1})}const $=k(P,[["render",W]]),L={class:"px-2 -mx-2 mt-4 py-2 flex block items-center gap2"},H=s("img",{src:"https://vueuse.org/favicon.svg",class:"h-1.5rem !w-1.5rem !my-0 flex-none"},null,-1),K=s("span",{class:"opacity-75"},"Avaliable in VueUse: ",-1),O=["href"],q=_({__name:"VueUseFn",props:{name:{}},setup(r){return(n,l)=>(t(),D("div",L,[H,K,s("a",{class:"ml-2 font-mono opacity-75 hover:opacity-100",href:`https://vueuse.org/${n.name}`},b(n.name),9,O)]))}}),z={class:"flex"},X=s("div",{"i-ri-sun-line":"","dark:i-ri-moon-line":""},null,-1),Y={class:"mr-1 ml-2"},N=_({__name:"DarkToggleButton",setup(r){return(n,l)=>(t(),D("button",{class:"bg-[#42b883] rounded border-b-2 border-green-900 text-white text-sm px-2 pt-1.5 pb-1 inline-block !outline-none hover:bg-opacity-85",onClick:l[0]||(l[0]=(...f)=>A(m)&&A(m)(...f))},[s("div",z,[X,s("span",Y,b(A(F)?"Dark":"Light"),1)])]))}}),G={};function J(r,n){const l=u;return t(),y(l,{class:"text-green-500"},{default:o(()=>[e(" Core ")]),_:1})}const Z=k(G,[["render",J]]),Q={class:"prose m-auto slide-enter-content"},ss=s("p",null,[s("div",{class:"table-of-contents"},[s("div",{class:"table-of-contents-anchor"},[s("div",{class:"i-ri-menu-2-fill"})]),s("ul",null,[s("li",null,[s("a",{href:"#vueuse"},"VueUse ")]),s("li",null,[s("a",{href:"#composition-api"},"Composition API "),s("ul",null,[s("li",null,[s("a",{href:"#ref-vs-reactive"},"Ref vs Reactive ")]),s("li",null,[s("a",{href:"#ref-auto-unwrapping"},"Ref Auto Unwrapping ")]),s("li",null,[s("a",{href:"#unref-oppsite-of-ref"},"unref - Oppsite of Ref ")])])]),s("li",null,[s("a",{href:"#patterns-tips"},"Patterns & Tips ")]),s("li",null,[s("a",{href:"#what’s-composable-functions"},"What’s composable Functions "),s("ul",null,[s("li",null,[s("a",{href:"#think-as-connections"},'Think as "Connections" ')]),s("li",null,[s("a",{href:"#one-thing-at-a-time"},"One Thing at a Time ")]),s("li",null,[s("a",{href:"#passing-ref-as-arguments"},"Passing Ref as Arguments ")]),s("li",null,[s("a",{href:"#mayberef"},"MaybeRef ")]),s("li",null,[s("a",{href:"#make-it-flexible"},"Make it Flexible ")]),s("li",null,[s("a",{href:"#usetitle-case"},"useTitle Case ")]),s("li",null,[s("a",{href:"#reuse-refs"},"Reuse Refs ")]),s("li",null,[s("a",{href:"#ref-unref"},"ref / unref ")]),s("li",null,[s("a",{href:"#object-of-refs"},"Object of Refs ")]),s("li",null,[s("a",{href:"#async-to-sync"},'Async to "Sync" ')]),s("li",null,[s("a",{href:"#usefetch-case"},"useFetch Case ")]),s("li",null,[s("a",{href:"#side-effects-self-cleanup"},"Side-effects Self Cleanup ")]),s("li",null,[s("a",{href:"#effectscope-rfc-upcoming"},"effectScope RFC Upcoming ")]),s("li",null,[s("a",{href:"#typed-provide-inject"},"Typed Provide / Inject ")]),s("li",null,[s("a",{href:"#shared-state"},"Shared State ")]),s("li",null,[s("a",{href:"#shared-state-ssr-friendly"},"Shared State (SSR friendly) ")]),s("li",null,[s("a",{href:"#usevmodel"},"useVModel ")])])]),s("li",null,[s("a",{href:"#vue-2-3"},"Vue 2 & 3 "),s("ul",null,[s("li",null,[s("a",{href:"#vue-composition-api-lib"},"@vue/composition-api Lib ")]),s("li",null,[s("a",{href:"#vue-2-7-upcoming"},"Vue 2.7 Upcoming ")]),s("li",null,[s("a",{href:"#vue-demi-lib"},"Vue Demi Lib ")])])]),s("li",null,[s("a",{href:"#thank-you"},"Thank you! ")])])])],-1),es=s("p",null,[e("This is the transcript of my talk "),s("strong",null,"Composable Vue"),e(" at "),s("a",{href:"https://2021.vueday.it/",target:"_blank",rel:"noopener"},"VueDay 2021")],-1),as=s("p",null,[e("Slides: "),s("a",{href:"https://antfu.me/talks/2021-04-29",target:"_blank",rel:"noopener"},"PDF"),e(" | "),s("a",{href:"https://talks.antfu.me/2021/composable-vue",target:"_blank",rel:"noopener"},"SPA")],-1),ls=s("p",null,[e("Recording: "),s("a",{href:"https://youtu.be/IMJjP6edHd0",target:"_blank",rel:"noopener"},"YouTube")],-1),os=s("a",{href:"https://github.com/slidevjs/slidev",target:"_blank",rel:"noopener"},[s("strong",null,"Slidev")],-1),ns=s("p",null,"My sharing today is Composable Vue, some pattens and tips that might be able to help you writing better composable logic in Vue.",-1),rs=s("h2",{id:"vueuse",tabindex:"-1"},[s("a",{href:"https://vueuse.org/",target:"_blank",rel:"noopener"},"VueUse"),e(),s("a",{class:"header-anchor",href:"#vueuse","aria-hidden":"true"},"#")],-1),ts=s("p",null,"It all started with me made this project called VueUse, which is a collection of Vue composable utilities. Initially, I was making this to share some of the functions I wrote with Vue Composition API to be used across apps. Till now, it grows much bigger with the community, we are now an organization on GitHub with 9 team members, 8 add-ons packages for different integrations like motions and document head management. We also have more than 100 functions in the core package that work for both Vue 2 and 3. I have really appreciated all the contributors and the awesome community.",-1),cs=s("a",{href:"https://github.com/vueuse/vueuse",target:"_blank"},"vueuse/vueuse",-1),ds=s("p",null,"In today’s talk, I will share with you the patterns and tips that I have learned during developing VueUse and using it to make apps in Composition API.",-1),ps=s("h2",{id:"composition-api",tabindex:"-1"},[e("Composition API "),s("a",{class:"header-anchor",href:"#composition-api","aria-hidden":"true"},"#")],-1),is=s("p",null,"Let’s have a quick look at the Composition API itself. BTW, please note today’s talk will be a little bit advanced, which I would assume you already have a basic knowledge of what the Vue Composition API is. But don’t worry if you don’t, I believe you will still get some basic images of the methodology and you can also find the slides and transcript on my site after the talk.",-1),ks={id:"ref-vs-reactive",tabindex:"-1"},ys=s("a",{class:"header-anchor",href:"#ref-vs-reactive","aria-hidden":"true"},"#",-1),us=s("p",null,"Well, let’s start with Ref and Reactive. I bet many of you have wondered the difference between them and which one should you choose.",-1),hs=s("p",null,[e('You can think refs as variables and reactives as objects. When you do the assignment, one is assigning "value" while the other one is assigning properties. While the usage of them can really dependents on what you gonna use them, but if we really need to pick one from them, I’d say go with '),s("code",null,"ref"),e(" whenever you can.")],-1),As=s("p",null,[e("With "),s("code",null,"ref"),e(", you will need to use "),s("code",null,".value"),e(" to access and assigning values, but this also gives you more explicit awareness of when you are tracking and triggering the reactivity system.")],-1),Ds=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 0")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"let "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // ts-error")]),e(`
`),s("span",{class:"line"})])],-1),fs=s("p",null,"As you can see the example here, I actually got an error by accidentally assigning ref with a value, and here I can change the code to fix it.",-1),Bs=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," { "),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"prop"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"({ "),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"prop"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," })")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"prop"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"prop"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1")]),e(`
`),s("span",{class:"line"})])],-1),ms=s("p",null,[e("On the other hand, when using "),s("code",null,"reactive"),e(" you actually can’t tell the difference between a plain object and a reactive object without looking for the context, which could sometimes make the debugging a little bit harder.")],-1),_s=s("p",null,[e("Also note in reactive objects, there are several caveats you need to take care about. Like you can’t do object destructure without "),s("code",null,"toRefs"),e(" otherwise they will lose the reactivity. And you will also need to wrap with a function when using with "),s("code",null,"watch"),e(" and so on, where "),s("code",null,"ref"),e(" does not have such limitations.")],-1),bs={id:"ref-auto-unwrapping",tabindex:"-1"},gs=s("a",{class:"header-anchor",href:"#ref-auto-unwrapping","aria-hidden":"true"},"#",-1),vs=s("p",null,[e("When using with "),s("code",null,"refs"),e(", a big obstacle that people facing is the annoying "),s("code",null,".value"),e(". But actually, in many cases, you can omit it and make your code looks cleaner.")],-1),Cs=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"watch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"count"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"count"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // same as `counter.value`")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),e(`
`),s("span",{class:"line"})])],-1),ws=s("p",null,[e("The "),s("code",null,"watch"),e(" function accepts ref as the watch source directly, and it will return the unwrapped new value of the ref in the callback. So in this case, there is zero "),s("code",null,".value"),e(" needed.")],-1),Fs=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"template"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  <"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"button"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," @click"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"counter += 1"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34","--s-dark":"#DBD7CAEE"}},"    Counter is {\\{ counter }}")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  </"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"button"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"</"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"template"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"})])],-1),Es=s("p",null,"The other one is the nature of Vue, in the template, all the refs are auto unwrapped, even assignments!",-1),xs=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"({ "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", "),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"id"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"10"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," })")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 'bar'")]),e(`
`),s("span",{class:"line"})])],-1),Is=s("p",null,"And whenever you feel like to better work with objects, you can pass the ref into the reactive object, and when you access the property, reactive will unwrap the ref automatically for you. Changes to the original ref will also reflect to the reactive object!",-1),Ts={id:"unref-oppsite-of-ref",tabindex:"-1"},Vs=s("code",null,"unref",-1),Ss=s("a",{class:"header-anchor",href:"#unref-oppsite-of-ref","aria-hidden":"true"},"#",-1),Rs=s("p",null,[s("code",null,"unref"),e(" is another Composition API I would like to introduce. As the name "),s("code",null,"unref"),e(" sounds, it’s kinda the opposite of ref. While the "),s("code",null,"ref()"),e(" function takes a value and turns it into a ref, "),s("code",null,"unref()"),e(" takes a ref and returns its value.")],-1),js=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"):"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," isRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ?"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," :"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," r")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),Ms=s("p",null,[e("The interesting part of it is that if you pass a plain value to "),s("code",null,"unref"),e(" it will return the value as-is to you, you can see the implementation is basically this.")],-1),Us=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"foo"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 'foo'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"bar"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 'bar'")]),e(`
`),s("span",{class:"line"})])],-1),Ps=s("p",null,"This is not a big feature, but a good tip to unify your logic which I will show you soon",-1),Ws=s("h2",{id:"patterns-tips",tabindex:"-1"},[e("Patterns & Tips "),s("a",{class:"header-anchor",href:"#patterns-tips","aria-hidden":"true"},"#")],-1),$s=s("p",null,"That’s the tips for using ref and reactive. Here I’d like to share with you some patterns of writing composable functions.",-1),Ls=s("h2",{id:"what’s-composable-functions",tabindex:"-1"},[e("What’s composable Functions "),s("a",{class:"header-anchor",href:"#what’s-composable-functions","aria-hidden":"true"},"#")],-1),Hs=s("p",null,"So what’s composable functions?",-1),Ks=s("p",null,"It’s actually kind of hard to give a proper definition, but I’d think it’s like sets for reusable logic to make your code better organized, and separate the concerns.",-1),Os=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useDark"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"options"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"UseDarkOptions"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {})"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"preferredDark"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," usePreferredDark"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // <--")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"store"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useStorage"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vueuse-dark"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"auto"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // <--")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"boolean"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">({")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    get"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"      return"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," store"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ==="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"auto"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"        ?"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," preferredDark"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"        :"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," store"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ==="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"dark"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    },")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    set"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"v"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},") {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"      store"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," = "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"v"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ==="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," preferredDark"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"        ?"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"auto"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"        :"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," v"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ?"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"dark"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," :"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"light"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    },")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  })")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),qs=s("p",null,[e("Here is an example, the "),s("code",null,"useDark"),e(" function in VueUse is provided as a simple toggle to enable or disable the dark mode for apps. There are actually two variables involved, one is the system’s preference and one is users’ manual overrides. System preference can be got using media queries, while we would also need to use localStorage to read and store the user’s preference of different modes.")],-1),zs=s("p",null,[e("As you can see in this code snippet, I have used two other composable functions "),s("a",{href:"https://vueuse.org/usePreferredDark",target:"_blank",rel:"noopener"},[s("code",null,"usePreferredDark")]),e(" and "),s("a",{href:"https://vueuse.org/useStorage",target:"_blank",rel:"noopener"},[s("code",null,"useStorage")]),e(", they will return two refs that reflecting on their states. Detailed things like monitoring the media query changes, the timing to read and write the storage are left to them. And all I need to do is logically composing their relationship into a single ref.")],-1),Xs=s("p",null,"You can see the full code or directly use it in VueUse with the link below.",-1),Ys=s("h3",{id:"think-as-connections",tabindex:"-1"},[e('Think as "Connections" '),s("a",{class:"header-anchor",href:"#think-as-connections","aria-hidden":"true"},"#")],-1),Ns=s("p",null,[e('The first methodology I want to share today is to think as "connections". Unlike hooks in React that will run on each updates, the '),s("code",null,"setup()"),e(" function in Vue only runs "),s("strong",null,"once"),e(" on component initialization, to construct the relations between your state and logic.")],-1),Gs=s("p",null,[e("You can think the equations in mathematics, where the left hand side and right hand side are always equal. Here we have "),s("code",null,"z=x^2+y^2"),e(", while "),s("code",null,"x"),e(" and "),s("code",null,"y"),e(" are independent variables, and "),s("code",null,"z"),e(" is a controlled variables relying on "),s("code",null,"x"),e(" and "),s("code",null,"y"),e(". Whenever I changed any of them, "),s("code",null,"z"),e(" will be updated accordingly (DEMO). Which is also similar to the formula in spreadsheets.")],-1),Js=s("p",null,"So in composable functions, we could think arguments are input and the returns as the output. The output should be able to reflect on input changes automatically. A bit complicated? I will walk with you on that later with examples.",-1),Zs=s("h3",{id:"one-thing-at-a-time",tabindex:"-1"},[e("One Thing at a Time "),s("a",{class:"header-anchor",href:"#one-thing-at-a-time","aria-hidden":"true"},"#")],-1),Qs=s("p",null,"Another aspect is to do one thing at a time - which is the same as how you write any code. No need for me to spend too much time on this, but basically they are listed here.",-1),se=s("ul",null,[s("li",null,"Extract duplicated logics into composable functions"),s("li",null,"Have meaningful names"),s("li",null,[e("Consistent naming conversions - "),s("code",null,"useXX"),e(),s("code",null,"createXX"),e(),s("code",null,"onXX")]),s("li",null,"Keep function small and simple"),s("li",null,'"Do one thing, and do it well"')],-1),ee=s("p",null,[e("Note it’s also important to have a consistent naming conversion, like prefixed with "),s("code",null,"useXX"),e(" or "),s("code",null,"createXX"),e(" and so on to make those composable functions distinguishable from other functions.")],-1),ae=s("h3",{id:"passing-ref-as-arguments",tabindex:"-1"},[e("Passing Ref as Arguments "),s("a",{class:"header-anchor",href:"#passing-ref-as-arguments","aria-hidden":"true"},"#")],-1),le=s("p",null,"Alright, let’s start our first pattern today - Passing refs as arguments.",-1),oe=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," a"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," +"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),ne=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 2")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"c"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 3")]),e(`
`),s("span",{class:"line"})])],-1),re=s("p",null,[e("Here we have a plain add function that sums up the two arguments "),s("code",null,"a"),e(" and "),s("code",null,"b"),e(". You can also see the example on the right.")],-1),te=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">,"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">)"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," +"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),ce=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"2"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"c"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"c"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 3")]),e(`
`),s("span",{class:"line"})])],-1),de=s("p",null,[e("And then we can make this function accepting refs, and return a computed ref with their sum. Then we can pass the refs to it as we normally would with plain values. The difference here is that the returned value is also a ref, but it will always be up-to-date with the ref "),s("code",null,"a"),e(" and "),s("code",null,"b"),e(".")],-1),pe=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," +"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"b"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"))")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),ie=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"c"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," add"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"a"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 5"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"c"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 6")]),e(`
`),s("span",{class:"line"})])],-1),ke=s("p",null,[e("And remember the "),s("code",null,"unref"),e(" function we mentioned before? We can actually make this function more flexible, by accepting both refs and plain values. And use "),s("code",null,"unref"),e(" to get their values. We can also make the addition possible between a ref and a value.")],-1),ye=s("h3",{id:"mayberef",tabindex:"-1"},[e("MaybeRef "),s("a",{class:"header-anchor",href:"#mayberef","aria-hidden":"true"},"#")],-1),ue=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"type"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," |"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T")]),e(`
`),s("span",{class:"line"})])],-1),he=s("p",null,[e("Here is a simple TypeScript’s type helper called "),s("code",null,"MaybeRef"),e(" that we have used a lot in VueUse. It’s a union of generic "),s("code",null,"T"),e(" and "),s("code",null,"Ref<T>"),e(".")],-1),Ae=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useTimeAgo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  time"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Date"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Date"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">,")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," someFormating"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"time"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")))")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),De=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," type"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"type"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," |"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useTimeAgo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  time"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Date"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">,")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," someFormating"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"time"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")))")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),fe=s("p",null,[e("In this case, we have the function useTimeAgo that accepts a wide range of Date-like types as an argument. Normally if you want to accept refs, you would need to write them again as Ref versions. With this helper, you can make the type shorter and more readable (change code). A cool point it that this works great with "),s("code",null,"unref"),e(", it can infer the correct type for "),s("code",null,"MaybeRef"),e(".")],-1),Be={id:"make-it-flexible",tabindex:"-1"},me=s("a",{class:"header-anchor",href:"#make-it-flexible","aria-hidden":"true"},"#",-1),_e=s("p",null,"Think your functions like LEGO, there should have many different ways of composing them for different needs.",-1),be=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," useTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"@vueuse/core"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Hello World"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// now the page's title changed")]),e(`
`),s("span",{class:"line"})])],-1),ge=s("p",null,[e("Here we take "),s("code",null,"useTitle"),e(" function from VueUse as an example. Basically when you call it, you will get a special ref that binds to your page’s title. Whenever you change the ref’s value, the page’s title will also be updated. Similarly, when the page’s title changed externally, the change will also be reflect to the ref’s value.")],-1),ve=s("p",null,"Looks good, right? But It creates a new ref whenever you call it. To make it more flexible, we can actually bind an existing ref, even computed!",-1),Ce=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," useTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"@vueuse/core"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Hello"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," `"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"${"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}}," - World"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"`")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"useTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // Hello - World")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Hi"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // Hi - World")]),e(`
`),s("span",{class:"line"})])],-1),we=s("p",null,"Here you can see, I constructed a computed with a ref, when I change the source ref, the computed get re-evaluated so as the page’s title.",-1),Fe={id:"usetitle-case",tabindex:"-1"},Ee=s("code",null,"useTitle",-1),xe=s("a",{class:"header-anchor",href:"#usetitle-case","aria-hidden":"true"},"#",-1),Ie=s("p",null,"You must be wondering how could this be implemented. Let’s take a look at a simplified version of it.",-1),Te=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," watch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," type"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"@vueuse/core"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  newTitle"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"null"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," | "),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"undefined"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"newTitle"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," || "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"document"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // <-- 1")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  watch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"t"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // <-- 2")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    if"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"t"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," !="),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," null"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"      document"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"title"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," t")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  },"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," { "),s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"immediate"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"true"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," })")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," title")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),Ve=s("p",null,"It’s actually only two statements! How?",-1),Se=s("p",null,"At the first line, unified the ref from the user, or create a new one. And on the second line, it watches the changes to the ref and sync up with page’s title.",-1),Re=s("p",null,"Emm, maybe it’s a little bit hard to catch on what’s happened in the first line, let me explain a bit.",-1),je={id:"reuse-refs",tabindex:"-1"},Me=s("a",{class:"header-anchor",href:"#reuse-refs","aria-hidden":"true"},"#",-1),Ue=s("p",null,"Here, we utilized an interesting behavior of the ref function.",-1),Pe=s("p",null,[e("Similar to "),s("code",null,"unref"),e(" - "),s("code",null,"ref"),e(" also checks whether the passed value is ref or not. If you passed a ref to it, it will it as-is - since it’s already a ref, there is no need to make another.")],-1),We=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // Ref<1>")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // Ref<1>")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ==="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," bar"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // true")]),e(`
`),s("span",{class:"line"})])],-1),$e=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useFoo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> | "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"  // no need!")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," isRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ? "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," : "),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"  // they are the same")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"  /* ... */")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),Le=s("p",null,[e("This could also be extremely useful in composable functions that take "),s("code",null,"MaybeRef"),e(" as argument types.")],-1),He=s("h3",{id:"ref-unref",tabindex:"-1"},[s("code",null,"ref"),e(" / "),s("code",null,"unref"),e(),s("a",{class:"header-anchor",href:"#ref-unref","aria-hidden":"true"},"#")],-1),Ke=s("p",null,"Let’s do a quick summary so far.",-1),Oe=s("ul",null,[s("li",null,[s("code",null,"MaybeRef<T>"),e(" works well with "),s("code",null,"ref"),e(" and "),s("code",null,"unref"),e(".")]),s("li",null,[e("Use "),s("code",null,"ref()"),e(" when you want to normalized it as a Ref.")]),s("li",null,[e("Use "),s("code",null,"unref()"),e(" when you want to have the value.")])],-1),qe=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"type"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," Ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," |"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," T")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useBala"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arg"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">)"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"reference"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arg"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // get the ref")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"arg"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // get the value")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),ze=s("p",null,[e("We can use "),s("code",null,"MaybeRef"),e(" in arguments to make the function flexible, and use "),s("code",null,"ref()"),e(" when you want to normalized it as a Ref and use "),s("code",null,"unref()"),e(" when you want to get the value. Both of them are universal and no conditions needed.")],-1),Xe={id:"object-of-refs",tabindex:"-1"},Ye=s("a",{class:"header-anchor",href:"#object-of-refs","aria-hidden":"true"},"#",-1),Ne=s("p",null,"Another pattern today is to use objects of refs. When you need to return multiple data entries in a composable function, consider returns an object composed by refs.",-1),Ge=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"    x"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"),")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"    y"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"0"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," x"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," y"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"mouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"useMouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"())")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"mouse"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"x"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," ==="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," x"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // true")]),e(`
`),s("span",{class:"line"})])],-1),Je=s("p",null,"In this way, users can have the full features of ES6 object destructure. The restructure values are refs, so the reactivity still remains, and users can also rename them, or take only partial of what they want.",-1),Ze=s("p",null,"On this other hand, it’s also flexible enough when users want to use it as a single object, simply wrap it with the reactive function, the refs will get unwrapped as a property automatically.",-1),Qe=s("p",null,[e("That said, users can get benefits from both "),s("code",null,"ref "),e("and "),s("code",null,"reactive"),e(" as need.")],-1),sa={id:"async-to-sync",tabindex:"-1"},ea=s("a",{class:"header-anchor",href:"#async-to-sync","aria-hidden":"true"},"#",-1),aa=s("p",null,'Since we are constructing "connections" using Composition API, we can actually make async functions to "sync" by building the connections first before it resolves.',-1),la=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," await"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," fetch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"https://api.github.com/"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"then"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"json"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"())")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// use data")]),e(`
`),s("span",{class:"line"})])],-1),oa=s("p",null,[e("Let’s say we want to request some data use the "),s("code",null,"fetch"),e(" API. Normally we need to "),s("code",null,"await"),e(" the request been responded and data been parsed, before we can use the data. With Composition API, we can make the data as a ref of null, then be fulfilled later.")],-1),na=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"{"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useFetch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"https://api.github.com/"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"json"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"user_url"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"?."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"user_url"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"})])],-1),ra=s("p",null,"This can make your apps take the time to handle other stuff while waiting for the data to be fetched. The idea is similar to react’s stale-while-revalidate, but with much easier implementation.",-1),ta={id:"usefetch-case",tabindex:"-1"},ca=s("code",null,"useFetch",-1),da=s("a",{class:"header-anchor",href:"#usefetch-case","aria-hidden":"true"},"#",-1),pa=s("p",null,[e("The implementation can be simplified down to this, all you have to do is to assign the value to "),s("code",null,"ref"),e(" when the promise got resolved.")],-1),ia=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useFetch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"R"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"url"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"MaybeRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">)"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," shallowRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"T"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," |"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," undefined"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">()")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"error"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," shallowRef"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"Error"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," |"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," undefined"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">()")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  fetch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"unref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"url"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"))")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    ."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"then"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"json"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"())")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    ."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"then"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," r"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    ."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"catch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"e"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," error"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," e"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"    data"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"    error")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),ka=s("p",null,"In the real world, we might also need some flags to show the current state of the request, where you can find the full code in VueUse.",-1),ya={id:"side-effects-self-cleanup",tabindex:"-1"},ua=s("a",{class:"header-anchor",href:"#side-effects-self-cleanup","aria-hidden":"true"},"#",-1),ha=s("p",null,[s("code",null,"watch"),e(" and "),s("code",null,"computed"),e(" functions in Vue will stop themselves automatically along with the components unmounting. We’d recommend following the same pattern for your custom composable functions.")],-1),Aa=s("p",null,[e("By calling the "),s("code",null,"onUnmounted"),e(" hooks inside your composable functions, you can schedule the effect clean-up logic.")],-1),Da=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," onUnmounted"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useEventListener"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"target"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"EventTarget"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," fn"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"any"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  target"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"addEventListener"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," fn"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  onUnmounted"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"    target"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"removeEventListener"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," fn"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // <--")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  })")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),fa=s("p",null,[e("For example, it’s common to use "),s("code",null,"addEventListener"),e(" to register the handler to DOM events. When you finish the usage, you would also need to remember to unregister it using "),s("code",null,"removeEventListener"),e(". In this case, we can have a function "),s("code",null,"useEventListener"),e(" that unregister itself along with the component so you don’t need to worry about it anymore.")],-1),Ba={id:"effectscope-rfc-upcoming",tabindex:"-1"},ma=s("code",null,"effectScope",-1),_a=s("a",{class:"header-anchor",href:"#effectscope-rfc-upcoming","aria-hidden":"true"},"#",-1),ba=s("p",null,[e("While side-effects auto clean-up is nice, sometimes you might want to have better controls over when to do that. I drafted an RFC proposing a new API called "),s("code",null,"effectScope"),e(" to collect those effects into a single instance, that you can stop them together at the time you want. This is likely to be implemented and shipped with Vue 3.1. Check out for more details if it get you interested.")],-1),ga=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// effect, computed, watch, watchEffect created inside the scope will be collected")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"scope"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," effectScope"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"doubled"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," counter"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," * "),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"2"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  watch"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"doubled"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"double"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"))")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  watchEffect"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"(()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," =>"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Count: "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," double"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"))")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// dispose all effects in the scope")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"stop"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"scope"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"})])],-1),va=s("h3",{id:"typed-provide-inject",tabindex:"-1"},[e("Typed Provide / Inject "),s("a",{class:"header-anchor",href:"#typed-provide-inject","aria-hidden":"true"},"#")],-1),Ca=s("p",null,[e("We have a set of new APIs called "),s("code",null,"provide"),e(" and "),s("code",null,"inject"),e(". It’s basically for sharing some context for the component’s children to consume and reuse. They are two separate function, which means TypeScript can’t actually infer the types for each context automatically.")],-1),wa=s("p",null,[e("But here we have a solution for that. Vue provided a type helper called "),s("code",null,"InjectionKey"),e(" where you can define a symbol that carries the type you want, and then it will hint "),s("code",null,"provide"),e(" and "),s("code",null,"inject"),e(" to have proper autocompletion and type checking.")],-1),Fa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// context.ts")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," type"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," InjectionKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," interface"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," UserInfo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  id"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"number")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"  name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"string")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"injectKeyUser"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"InjectionKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"UserInfo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"})])],-1),Ea=s("p",null,[e("For example, here I defined an interface "),s("code",null,"UserInfo"),e(" which contains two properties. And I exported a symbol with the "),s("code",null,"InjectionKey"),e(" type.")],-1),xa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// parent.vue")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," provide"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," injectKeyUser"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./context"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," default"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  setup"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    provide"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"injectKeyUser"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"      id"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"7"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", "),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// type error: should be number")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"      name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Anthony"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    })")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),Ia=s("p",null,[e("In usage, I can use the "),s("code",null,"provide"),e(" function to provide the data with key. Can you see here I get a type error that the id should be a number. So I can catch up the error right away before it goes to production.")],-1),Ta=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// child.vue")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," inject"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," injectKeyUser"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./context"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," default"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  setup"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"    const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"user"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," inject"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"injectKeyUser"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"    // UserInfo | undefined")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    if"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"user"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"      console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"user"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},") "),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// Anthony")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),Va=s("p",null,[e("And in the child component, we can use the "),s("code",null,"inject"),e(" function with the key as well. You can see it correctly infers the type "),s("code",null,"UserInfo"),e(" and so as its property.")],-1),Sa={id:"shared-state",tabindex:"-1"},Ra=s("a",{class:"header-anchor",href:"#shared-state","aria-hidden":"true"},"#",-1),ja=s("p",null,"With the flexibility of Vue’s Composition API, sharing state is actually quite simple.",-1),Ma=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// shared.ts")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"({")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}},"1"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},",")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#998418","--s-dark":"#B8A965"}},"  bar"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"Hello"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),e(`
`),s("span",{class:"line"})])],-1),Ua=s("p",null,"You can declare some ref or reactive state in a js module, and import them to your components. Since they are using the same instance, the state will be just in sync.",-1),Pa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// A.vue")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./shared.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," +="),s("span",{style:{color:"#2F798A","--s-dark":"#4C9A91"}}," 1")]),e(`
`),s("span",{class:"line"})])],-1),Wa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// B.vue")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"./shared.ts"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"console"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"log"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"foo"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}}," // 2")]),e(`
`),s("span",{class:"line"})])],-1),$a=s("p",null,"But please note this is actually not SSR compatible. In SSR your server will create a new app on each request, where this approach will keep the state persistent across multiple rendering. And normally it’s not what we would expect.",-1),La={id:"shared-state-ssr-friendly",tabindex:"-1"},Ha=s("a",{class:"header-anchor",href:"#shared-state-ssr-friendly","aria-hidden":"true"},"#",-1),Ka=s("p",null,"Let’s see if we can make a solution for it to work with SSR.",-1),Oa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"myStateKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"InjectionKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"MyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"> ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," Symbol"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," createMyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"    /* ... */")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    install"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"app"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},": "),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}},"App"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},") {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"      app"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"provide"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"myStateKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"():"),s("span",{style:{color:"#2E8F82","--s-dark":"#5DA994"}}," MyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," inject"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"myStateKey"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"!")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),qa=s("p",null,[e("By using "),s("code",null,"provide"),e(" and "),s("code",null,"inject"),e(", to share the state one the App context, which means it will be created every time when the server doing the rendering. You can see here I have two function, "),s("code",null,"createMyState"),e(" and "),s("code",null,"useMyState"),e(". "),s("code",null,"createMyState"),e(" will returns a Vue plugin that provide the state to the App. While "),s("code",null,"useMyState"),e(" is just a wrapper of "),s("code",null,"inject"),e(" using the same key.")],-1),za=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// main.ts")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"App"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," createApp"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"App"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"app"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"use"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"createMyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"())")]),e(`
`),s("span",{class:"line"})])],-1),Xa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// A.vue")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// use everywhere in your app")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"state"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useMyState"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()")]),e(`
`),s("span",{class:"line"})])],-1),Ya=s("p",null,[e("In usage, we can create the state in the main entry and pass it to "),s("code",null,"app.use"),e(". Then you can use the hook "),s("code",null,"useMyState"),e(" everywhere in your components.")],-1),Na=s("p",null,[e("If you have ever tried Vue Router v4, it actually uses a similar method to do that like "),s("code",null,"createRouter"),e(" and `useRouter.")],-1),Ga={id:"usevmodel",tabindex:"-1"},Ja=s("a",{class:"header-anchor",href:"#usevmodel","aria-hidden":"true"},"#",-1),Za=s("p",null,[e("One last tip I’d like to share is a utility called "),s("code",null,"useVModel"),e(".")],-1),Qa=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}}," function"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useVModel"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"props"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"  const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"emit"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," getCurrentInstance"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"()."),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"emit")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"  return"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," computed"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"({")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    get"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"() {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"      return"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," props"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"["),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"]")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    },")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"    set"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"v"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},") {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"      emit"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"`"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"update:"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"${"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"name"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"`"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},", "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"v"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"    }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  })")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"}")]),e(`
`),s("span",{class:"line"})])],-1),sl=s("p",null,[e("It’s just a simple wrapper to the component model to bind with "),s("code",null,"props"),e(" and "),s("code",null,"emit"),e(". This is actually a lifesaver to me.")],-1),el=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"export"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," default"),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," defineComponent"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"({")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"  setup"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"props"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},") {")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#AB5959","--s-dark":"#CB7676"}},"    const "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," ="),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}}," useVModel"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"props"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"value"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"    return"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," { "),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"value"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  }")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"})")]),e(`
`),s("span",{class:"line"})])],-1),al=s("p",null,"We can take a look at the code, you can see we used a writable computed. When accessing the value, we forward the value of props to it, and when writing, we emit out the update event automatically so you can use just like a normal ref.",-1),ll=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"<"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"template"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"  <"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"input"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," v-model"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"="),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"value"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},'"'),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," />")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#999999","--s-dark":"#666666"}},"</"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"template"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},">")]),e(`
`),s("span",{class:"line"})])],-1),ol=s("p",null,[e("Even more, we can actually bind into our children elements’s "),s("code",null,"v-model"),e(" very easily.")],-1),nl=s("h2",{id:"vue-2-3",tabindex:"-1"},[e("Vue 2 & 3 "),s("a",{class:"header-anchor",href:"#vue-2-3","aria-hidden":"true"},"#")],-1),rl=s("p",null,"That’s all the tips and patterns I have for today.",-1),tl=s("p",null,"As you might think those are for Vue 3 only, but actually they also applies for Vue 2!",-1),cl={id:"vue-composition-api-lib",tabindex:"-1"},dl=s("code",null,"@vue/composition-api",-1),pl=s("a",{class:"header-anchor",href:"#vue-composition-api-lib","aria-hidden":"true"},"#",-1),il=s("p",null,"In case you didn’t know that, if you are still on Vue 2 but want to start using the Composition API, here we offered an official plugin that enables the Composition API for your Vue 2 app. Give it a try if you haven’t.",-1),kl=s("a",{href:"https://github.com/vuejs/composition-api",target:"_blank"},"vuejs/composition-api",-1),yl=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," Vue"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," VueCompositionAPI"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"@vue/composition-api"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"}),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"Vue"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"."),s("span",{style:{color:"#59873A","--s-dark":"#80A665"}},"use"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},"("),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}},"VueCompositionAPI"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},")")]),e(`
`),s("span",{class:"line"})])],-1),ul=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"@vue/composition-api"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"})])],-1),hl={id:"vue-2-7-upcoming",tabindex:"-1"},Al=s("a",{class:"header-anchor",href:"#vue-2-7-upcoming","aria-hidden":"true"},"#",-1),Dl=s("p",null,[e("We also announced "),s("a",{href:"https://github.com/vuejs/rfcs/blob/ie11/active-rfcs/0000-vue3-ie11-support.md#for-those-who-absolutely-need-ie11-support",target:"_blank",rel:"noopener"},"our plan for Vue 2.7"),e(" recently. Vue 2.7 will be the last minor version of Vue 2 with long time support for existing projects and those who still need IE 11 support. We will back-port Vue 3’s new features to Vue 2.7 and migrate the "),s("code",null,"@vue/compositon-api"),e(" plugin into it. Stay tuned on that.")],-1),fl=s("ul",null,[s("li",null,[e("Backport "),s("code",null,"@vue/composition-api"),e(" into Vue 2’s core.")]),s("li",null,[s("code",null,"<script setup>"),e(" syntax in Single-File Components.")]),s("li",null,"Migrate codebase to TypeScript."),s("li",null,"IE11 support."),s("li",null,"LTS.")],-1),Bl={id:"vue-demi-lib",tabindex:"-1"},ml=s("a",{class:"header-anchor",href:"#vue-demi-lib","aria-hidden":"true"},"#",-1),_l=s("p",null,"If you are a library author want your libraries to support Vue 2 and 3 with the same codebase. You can try Vue Demi, which eases out the difference between Vue 2 and 3 and auto-detects users’ environment.",-1),bl=s("a",{href:"https://github.com/vueuse/vue-demi",target:"_blank",rel:"noopener"},"vueuse/vue-demi",-1),gl=s("pre",{class:"shiki shiki-themes vitesse-light vitesse-dark",style:{"background-color":"#ffffff","--s-dark-bg":"#121212",color:"#393a34","--s-dark":"#dbd7caee"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0","--s-dark":"#758575DD"}},"// same syntax for both Vue 2 and 3")]),e(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}},"import"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," {"),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," defineComponent"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," reactive"),s("span",{style:{color:"#999999","--s-dark":"#666666"}},","),s("span",{style:{color:"#B07D48","--s-dark":"#BD976A"}}," ref"),s("span",{style:{color:"#999999","--s-dark":"#666666"}}," }"),s("span",{style:{color:"#1E754F","--s-dark":"#4D9375"}}," from"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}}," '"),s("span",{style:{color:"#B56959","--s-dark":"#C98A7D"}},"vue-demi"),s("span",{style:{color:"#B5695999","--s-dark":"#C98A7D99"}},"'")]),e(`
`),s("span",{class:"line"})])],-1),vl=s("h2",{id:"thank-you",tabindex:"-1"},[e("Thank you! "),s("a",{class:"header-anchor",href:"#thank-you","aria-hidden":"true"},"#")],-1),Cl=s("p",null,"That’s all for today.",-1),wl=s("p",null,"Due to the time limit, it’s a shame that I can not share all I have learned with you. As the Vue composition API is still fairly new, I believe there are more patterns and better practices for us to found.",-1),Fl=s("p",null,[e("To find more information, do check out the "),s("a",{href:"https://github.com/vueuse",target:"_blank",rel:"noopener"},"VueUse org on GitHub"),e(" and "),s("a",{href:"https://vueuse.org/add-ons.html",target:"_blank",rel:"noopener"},"its awesome ecosystem"),e(", and follow us on Twitter "),s("a",{href:"https://twitter.com/vueuse",target:"_blank",rel:"noopener"},"@vueuse"),e(" to keep up-to-date with news and tips.")],-1),El=s("p",null,"Thank you!",-1),xl=s("p",{align:"center"},[s("a",{href:"https://github.com/sponsors/antfu#sponsors"},[s("img",{src:"https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg"})])],-1),Rl={__name:"composable-vue-vueday-2021",setup(r){const n={title:"Composable Vue - VueDay 2021",description:"Slides & transcript for my talk at VueDay 2021",date:"2021-04-28T16:00:00.000Z",lang:"en",type:"talk+blog",recording:!0,duration:"30min",image:"https://antfu.me/og/composable-vue-vueday-2021.png",meta:[{property:"og:title",content:"Composable Vue - VueDay 2021"},{name:"twitter:title",content:"Composable Vue - VueDay 2021"},{name:"description",content:"Slides & transcript for my talk at VueDay 2021"},{property:"og:description",content:"Slides & transcript for my talk at VueDay 2021"},{name:"twitter:description",content:"Slides & transcript for my talk at VueDay 2021"},{property:"og:image",content:"https://antfu.me/og/composable-vue-vueday-2021.png"},{name:"twitter:image",content:"https://antfu.me/og/composable-vue-vueday-2021.png"},{name:"twitter:card",content:"summary_large_image"}]};return E({title:"Composable Vue - VueDay 2021",meta:[{property:"og:title",content:"Composable Vue - VueDay 2021"},{name:"twitter:title",content:"Composable Vue - VueDay 2021"},{name:"description",content:"Slides & transcript for my talk at VueDay 2021"},{property:"og:description",content:"Slides & transcript for my talk at VueDay 2021"},{name:"twitter:description",content:"Slides & transcript for my talk at VueDay 2021"},{property:"og:image",content:"https://antfu.me/og/composable-vue-vueday-2021.png"},{name:"twitter:image",content:"https://antfu.me/og/composable-vue-vueday-2021.png"},{name:"twitter:card",content:"summary_large_image"}]}),(f,Il)=>{const g=T,h=I,i=Z,v=N,d=q,p=$,c=u,B=U,C=x;return t(),y(C,{frontmatter:n},{default:o(()=>[s("div",Q,[ss,s("blockquote",null,[es,as,ls,s("p",null,[e("Made with "),a(g,{class:"inline"}),e(),os,e(" - a slides maker for developers that I am working on recently.")])]),ns,rs,ts,a(h,{class:"inline-block"}),e(),cs,ds,ps,is,s("h3",ks,[e("Ref vs Reactive "),a(i),e(),ys]),us,hs,As,Ds,fs,Bs,ms,_s,s("h3",bs,[e("Ref Auto Unwrapping "),a(i),e(),gs]),vs,Cs,ws,Fs,Es,xs,Is,s("h3",Ts,[Vs,e(" - Oppsite of Ref "),a(i),e(),Ss]),Rs,js,Ms,Us,Ps,Ws,$s,Ls,Hs,Ks,Os,qs,a(v),zs,Xs,a(d,{name:"useDark"}),Ys,Ns,Gs,Js,Zs,Qs,se,ee,ae,le,oe,ne,re,te,ce,de,pe,ie,ke,ye,ue,he,Ae,De,fe,s("h3",Be,[e("Make it Flexible "),a(p),e(),me]),_e,be,ge,ve,Ce,we,s("h3",Fe,[Ee,e(),a(c,{class:"text-blue-400"},{default:o(()=>[e("Case")]),_:1}),e(),xe]),Ie,Te,Ve,Se,Re,a(d,{name:"useTitle"}),s("h3",je,[e("Reuse Refs "),a(i),e(),Me]),Ue,Pe,We,$e,Le,He,Ke,Oe,qe,ze,s("h3",Xe,[e("Object of Refs "),a(p),e(),Ye]),Ne,Ge,Je,Ze,Qe,s("h3",sa,[e('Async to "Sync" '),a(B),e(),ea]),aa,la,oa,na,ra,s("h3",ta,[ca,e(),a(c,{class:"text-blue-400"},{default:o(()=>[e("Case")]),_:1}),e(),da]),pa,ia,ka,a(d,{name:"useFetch"}),s("h3",ya,[e("Side-effects Self Cleanup "),a(p),e(),ua]),ha,Aa,Da,fa,a(d,{name:"useEventListener"}),s("h3",Ba,[ma,e(" RFC "),a(c,{class:"text-purple-400"},{default:o(()=>[e("Upcoming")]),_:1}),e(),_a]),ba,ga,va,Ca,wa,Fa,Ea,xa,Ia,Ta,Va,s("h3",Sa,[e("Shared State "),a(p),e(),Ra]),ja,Ma,Ua,Pa,Wa,$a,s("h3",La,[e("Shared State (SSR friendly) "),a(p),e(),Ha]),Ka,Oa,qa,za,Xa,Ya,Na,s("h3",Ga,[e("useVModel "),a(B),e(),Ja]),Za,Qa,sl,el,al,ll,ol,a(d,{name:"useVModel"}),nl,rl,tl,s("h3",cl,[dl,e(),a(c,{class:"text-teal-400"},{default:o(()=>[e("Lib")]),_:1}),e(),pl]),il,a(h,{class:"inline-block"}),e(),kl,yl,ul,s("h3",hl,[e("Vue 2.7 "),a(c,{class:"text-purple-400"},{default:o(()=>[e("Upcoming")]),_:1}),e(),Al]),Dl,fl,s("h3",Bl,[e("Vue Demi "),a(c,{class:"text-teal-400"},{default:o(()=>[e("Lib")]),_:1}),e(),ml]),_l,a(h,{class:"inline-block"}),e(),bl,gl,vl,Cl,wl,Fl,El,xl])]),_:1})}}};export{Rl as default};
